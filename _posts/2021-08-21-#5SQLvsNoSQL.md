---
layout: post
title: "SQL vs NoSQL"
categories: DB
author: bn-tw2020
---
* content
{:toc}


## SQL(관계형 DB)

* SQL을 사용하면 RDBMS에서 CRUD가 가능하다.

* 관계형 데이터베이스는 핵심 2가지가 존재한다.

  * 데이터는 정해진 데이터 스키마에 따라서 테이블에 저장된다.

  * 데이터는 관계를 통해 여러 테이블에 퍼져있다.






* 데이터는 테이블에 레코드로 저장된다. 각 테이블마다 명확하게 정의된 구조가 존재한다.

  해당 구조는 필드의 이름과 데이터 유형으로 정의된다.

  그래서, **스키마를 준수하지 않는 레코드** 는 추가가 불가능하다. 스키마 수정이 이루어지지 않는 한

  정해진 구조에 맞게 레코드를 삽입해야 하는 것으 RDB에 특징입니다.

* RDB에서는 중복성을 제거하기 위해서 관계를 이용합니다.

  테이블에서 중복 없이 하나의 데이터만을 관리하기 때문에 다른 테이블에서 부정확한 데이터를 다룰 위험이 없어집니다.


## NoSQL(비관계형 DB)

* 관계형DB의 반대의 의미이다.

  스키마가 없고 관계도 없습니다.

* NoSQL에서는 레코드를 문서(doucument)입니다.

  SQL과의 가장 핵심적인 차이가 존재하는데 SQL은 정해진 스키마를 따르지 않으면 삽입이 되지 않았지만,

  **NoSQL은 다른 구조의 데이터를 같은 컬렉션에 추가가 가능하다.**

* document는 Json과 비슷한 형태로 이루어져 있으며, 관계형 데이터베이스처럼 여러 테이블에 나누어 담지 않고,

  관련 데이터를 동일한 **컬렉션** 에 넣는다.

* SQL에서 고객, 주문, 제품 테이블로 3개로 나눈 것을 NoSQL에서는 한꺼번에 포함되서 저장하게 됩니다.

* 여러 테이블에 JOIN 할 필요 없이 이미 필요한 모든 것을 갖춘 문서를 작성하는것이 **NoSQL** 이다.

  그래서 NoSQL은 JOIN의 개념이 없습니다.

> Q. 그럼 조인은 할때 어떻게 하나요?

> A. 컬렉션을 통해 데이터를 복제하여 각 컬렉션 일부분에 속하는 데이터를 정확하게 산출하도록 합니다.
> 데이터가 중복되어 서로 영향을 줄 위험이 존재합니다. 따라서 조인을 잘 사용하지 않고 자주 변경되지 않는 데이터일 때 사용하는 것이 좋습니다.


## 장단점

* SQL 장점

  * 명확하게 정의된 스키마, 데이터 무결성을 보장한다.

  * 관계는 각 데이터를 중복없이 한번만 저장한다.

* SQL 단점

  * 덜 유연하며, 데이터 스키마를 사전에 계획하고 알려줘야 한다.

  * 관계를 맺고 있어서 조인문이 많은 복잡한 쿼리를 만들어질 수 있다.

* NoSQL 장점

  * 스키마가 없어서 유연하다. 언제든지 저장된 데이터를 조정하고 새로운 필드 추가가 가능하다.

  * 데이터는 애플리케이션이 필요로 하는 형식으로 저장된다. 데이터 읽어오는 속도가 빨라진다.

* NoSQL 단점

  * 유연성으로 인해 데이터 구조 결정을 미루게 될 수 있다.

  * 데이터 중복을 계속 업데이트해야 한다.

  * 데이터가 여러 컬렉션에 중복되어 있기에 수정 시 모든 컬렉션을 수정해야 한다.


## NoSQL의 종류

* NoSQL 데이터베이스는 각 데이터베이스마다 기반으로 하는 데이터 모델이 다릅니다.

  데이터 모델별로 대표적인 데이터베이스가 존재합니다.

* Key-Value Store : redis, riak

* Wide Column Store : HBASE, cassandra

* Document Store : mongoDB, counchDB

* Graph Store : Neo4j, infiniteGraph

## 무엇을 사용하는가?

* SQL 데이터베이스 사용이 더 좋을 때

  * 관계를 맺고 있는 데이터가 자주 변경되는 애플리케이션 경우

  * 변경될 여지가 없고, 명확한 스키마가 사용자와 데이터에게 중요한 경우

* NoSQL 데이터베이스 사용이 더 좋을 때

  * 정확한 데이터 구조를 알 수 없거나, 변경/확장이 될 수 있는 경우

  * 읽기를 자주 하지만, 데이터 변경이 잦지 않은 경우

  * 막대한 양의 데이터를 다뤄야 하는 경우

## Summary

> 정답은 없는 것 같다. SQL를 활용하여 JOIN을 만들지 않도록 설계하여 단점을 없애거나
> NoSQL을 선택해서 중복 데이터를 줄여 버려서 단점을 없앨 수도 있을 것 같다.