---
layout: post
title: "네트워크 계층(IP)"
categories: 네트워크
author: bn-tw2020
---
* content
{:toc}


<img width="655" alt="스크린샷 2021-08-27 오전 12 22 20" src="https://user-images.githubusercontent.com/66770613/130990534-4a10747b-f7d1-4c79-8582-8034989ea27c.png">  





## IP Address

* IP 주소는 흔히 호스트를 지칭하는 주소이다라고 한다.

  IP Address(IPv4)는 32비트 주소 체계를 가지고 있다. 이론 상의 2^32개의 주소를 가지게 된다.

  32비트라서 사람이 읽기 힘들어서 8비트씩 끊어서 10진수로 바꾼 것이 현재 우리가 읽는 것이다.

* IP 주소가 호스트를 지칭하기 보단 호스트에 들어있는 NIC(Network Interface Card)를 지칭합니다.

  컴퓨터에 NIC를 여러 개 넣으면 여러 개의 주소를 갖게 되는 것이다. 대표적인 예가 **라우터**가 있는 것이다.

* 현재 IP주소는 계층화가 되어있다.

  2부분으로 나눠져 있다. 앞부분은 네트워크 아이디, 호스트를 지칭하는 호스트 아이디로 나뉘게 된다.

  같은 네트워크 아이디를 갖은 IP주소는 같은 네트워크에 속하게 된다.

<img width="582" alt="스크린샷 2021-08-27 오전 12 46 07" src="https://user-images.githubusercontent.com/66770613/130994162-9da67c02-56d2-4965-b78c-49e0bb3fdae9.png">  


* 10진수로 처리한 것은 사람들이 읽기가 쉽지만, 기계들은 2진수를 더 좋아하게 된다.

  그래서 2진수로 네트워크 아아디와 호스트 아이디를 나눈 것이 **서브넷 마스크** 이다.

<img width="630" alt="스크린샷 2021-08-27 오전 12 48 04" src="https://user-images.githubusercontent.com/66770613/130994457-55194571-ff0d-4ebc-b499-f21c18e79c76.png">  


## IP 주소 분류

* 과거의 IP주소 분리

* Class A

  Very Large /8 blocks으로 8bit의 네트워크 아이디를 가지게 되어 적은 기관에 호스트만 많게 됩니다.

* Class B

  Large /16 blocks으로 16bit의 네트워크 아이디를 가지게 되어 Class A보다는 많은 기관을 가지게 됩니다.

* Class C

  Small /24 blocks으로 24bit의 네트워크 아이디를 가지게됩니다. 하지만 8bit의 호스트로 256개의 호스트만 가지게 됩니다.

  초기에 대학교가 Class C을 받았지만 사람이 많은 곳에 256의 호스트를 가지는 것은 턱 없이 부족하게 됩니다.

  대학교에 천 명개의 호스트가 필요했다면 4개의 Class C를 받았습니다.

* 위와 같은 문제로 8bit로 나누는 것이 아닌 자유롭게 나뉘게 됩니다. 클래스가 없는 도메인 간 라우팅 기법인 최신의 IP 주소 할당입니다.

  그것이 **CIDR(Classless Inter-Domain Routing)**이라고 부르게 됩니다.

  그래서 Class C를 4개 받지 않고 /22로 22bit의 네트워크 아이디를 할당받게 되면 1024개의 호스트를 가질 수 있게 됩니다.


## 서브넷(Subnets)

* 서브넷은 같은 서브넷 아이디, 같은 prefix을 가진 디바이스의 집합을 의미한다.

  또한, 라우터를 거치지 않고 접근이 가능한 호스트들의 집합이다.

* 라우터의 특징은 여러 개의 IP주소를 갖게 되는데 네트워크 아이디가 다릅니다. 즉, 여러 곳의 서브넷에 속하게 됩니다.

  그래서 라우터를 통해 다른 곳으로 이동이 가능합니다.

<img width="438" alt="스크린샷 2021-08-27 오전 1 19 24" src="https://user-images.githubusercontent.com/66770613/130999129-8eab4a89-6a20-4b8c-bff0-4b94f36f229e.png">  


## IPv4

* 32bit짜리 주소 공간이며, 인터페이스를 지칭합니다. 네트워크 아이디, 호스트 아이디로 나뉘게 됩니다.

  이론상으로 2^32 개의 호스트를 지칭할 수 있습니다. 대략 40억정도 됩니다.

* 인터넷이 상업화되면서 IP주소가 부족할 거라는 생각이 들면서 새로운 프로토콜인 IPv6을 디자인하게 되었다.


## IPv6

* 주소공간을 128bit로 늘리게 되었다. 대략 전세계의 해변의 모래알 갯수보다 많다고 합니다.

* 현재 우리는 IPv4를 쓰고 있습니다. 위에서 IPv6 나온 이유는 IP주소 고갈이였다.

  현재 IPv4를 쓰고 있다는 것은 부족할 거라는 이야기가 거짓말이거나 IP주소가 고갈이 되었는데 무슨 방법을 쓰고 있다입니다.

* 지금 IP주소를 재활용하고 있다는 이야기입니다. 이 트릭이 바로 **NAT** 입니다.